{"version":3,"file":"dca-ajax-operations.12904106.js","mappings":"AAAAA,OAAOC,MAAQD,OAAOC,OAAS,CAAC,EAQhCD,OAAOC,MAAMC,oBAAsB,SAAUC,EAAIC,GAC7CD,EAAGE,OASH,MAAMC,EAAQC,EAAEJ,GAAIK,SAAS,OACvBC,EAAYN,EAAGO,aAAa,kCAC5BC,EAAQR,EAAGO,aAAa,mCAExBE,EAXN,SAAyBC,EAAMC,GAC3B,MACMC,EADQ,IAAIC,OAAO,SAASH,EAAKI,QAAQ,KAAM,OAAOA,QAAQ,IAAK,mBACnDC,KAAKJ,GAE3B,OAAmB,OAAZC,EAAmB,GAAKI,mBAAmBJ,EAAQ,GAAGE,QAAQ,MAAO,KAChF,CAMiBG,CAAgB,QADdjB,EAAGO,aAAa,SAE7BW,EAAYT,EAAW,UAAUA,IAAa,GA+BpD,OA5BA,IAAIU,QAAQC,KAAK,CACbC,iBAAiB,EACjBC,IAAKzB,OAAO0B,SAASZ,KAAOO,EAC5BM,UAAAA,CAAWC,GAEP,GAAIC,KAAKC,UAAU,mBAEf,YADA9B,OAAO0B,SAAST,QAAQY,KAAKC,UAAU,oBAI3C,IAAIC,EAAWH,EAAKI,UAEW,IAA3BD,EAASE,QAAQ,OACjBF,EAAW,GAAG/B,OAAOkC,OAAOC,2BAA2BnC,OAAOkC,OAAOE,eAAeR,EAAKI,YAG7F1B,EAAM+B,IAAMN,EAEZ5B,EAAGmC,aAAa,kCAAmCV,EAAKW,UAC5D,IACDC,KAAK,CACJC,OAAQ,qBACRhC,YACAL,KACAO,QACA+B,cAAe1C,OAAOkC,OAAOS,iBAG1B,CACX","sources":["webpack:///./assets/dca-ajax-operations.js"],"sourcesContent":["window.Haste = window.Haste || {};\n\n/**\n * Toggle ajax operation\n * @param {object} el The DOM element\n * @param {string} id The ID of the target element\n * @returns {boolean}\n */\nwindow.Haste.toggleAjaxOperation = function (el, id) {\n    el.blur();\n\n    function getUrlParameter(name, href) {\n        const regex = new RegExp(`[\\\\?&]${name.replace(/\\[/, '\\\\[').replace(/]/, '\\\\]')}=([^&#]*)`);\n        const results = regex.exec(href);\n\n        return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n    }\n\n    const image = $(el).getFirst('img');\n    const operation = el.getAttribute('data-haste-ajax-operation-name');\n    const value = el.getAttribute('data-haste-ajax-operation-value');\n    const buttonHref = el.getAttribute('href');\n    const urlTable = getUrlParameter('table', buttonHref);\n    const urlAppend = urlTable ? `&table=${urlTable}` : '';\n\n    // Send the request\n    new Request.JSON({\n        followRedirects: true,\n        url: window.location.href + urlAppend,\n        onComplete(json) {\n            // Support Contao redirects\n            if (this.getHeader('X-Ajax-Location')) {\n                window.location.replace(this.getHeader('X-Ajax-Location'));\n                return;\n            }\n\n            let iconPath = json.nextIcon;\n\n            if (iconPath.indexOf('/') === -1) {\n                iconPath = `${window.Contao.script_url}system/themes/${window.Contao.theme}/icons/${json.nextIcon}`;\n            }\n\n            image.src = iconPath;\n\n            el.setAttribute('data-haste-ajax-operation-value', json.nextValue);\n        },\n    }).post({\n        action: 'hasteAjaxOperation',\n        operation,\n        id,\n        value,\n        REQUEST_TOKEN: window.Contao.request_token,\n    });\n\n    return false;\n};\n"],"names":["window","Haste","toggleAjaxOperation","el","id","blur","image","$","getFirst","operation","getAttribute","value","urlTable","name","href","results","RegExp","replace","exec","decodeURIComponent","getUrlParameter","urlAppend","Request","JSON","followRedirects","url","location","onComplete","json","this","getHeader","iconPath","nextIcon","indexOf","Contao","script_url","theme","src","setAttribute","nextValue","post","action","REQUEST_TOKEN","request_token"],"sourceRoot":""}